<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   
</head>

<body>
    <script>
              
        h1 = document.createElement("h1")
        h1.innerHTML = "Cadastro de Produtos"
        h1.style.color = "white"
        h1.style.cssFloat = "rigth"
        h1.style.textAlign = "center"
        h1.style.fontSize = "30px"
        h1.style.backgroundColor = "#4d1919"
        h1.style.margin = "0"
        h1.style.boxShadow = "20px 30px 30px black"
        h1.style.width = "100%"
        h1.style.height = "60px"
    
        document.body.style.margin = "0"
        document.body.appendChild(h1)
        document.body.style.fontFamily ="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif"
        document.body.style.backgroundColor ="#2E2E2E"
       /* hr = document.createElement("hr")
        hr.style.margin = "0"
        document.body.appendChild(hr)*/
        pInstrucao = document.createElement("p")
        pInstrucao.innerText = "* para editar dê dois click no item da tabela, edite no formulário, e click no botão salvar"
        pInstrucao.style.color = "white"
        pInstrucao.style.margin = "0"
        //pInstrucao.style.padding = "0"
        pInstrucao.style.display = "block"
        pInstrucao.style.width = "100%"
        pInstrucao.style.fontSize = "11px"


        formBusca = document.createElement("form")
        pBusca = document.createElement("p")
        pBusca.innerHTML = "BUSCAR "
       
        buscar = document.createElement("input")
        buscar.setAttribute("type","search")
        buscar.setAttribute("placeholder","digite a palavra-chave...")

        pBusca.appendChild(buscar)
        pBusca.style.color = "white"
       
        btnBusca = document.createElement("button")
        btnBusca.setAttribute("onclick","buscaItem()")
        btnBusca.innerHTML = "Ok"
        
        
       
        pBusca.appendChild(btnBusca)
        formBusca.appendChild(pBusca)
        formBusca.style.dysplay = "inline"
        formBusca.style.cssFloat = "right"
        formBusca.style.marginRight = "600px"

        
        document.body.appendChild(formBusca)
        
        //FORMULARIO DE ENTRADA DE DADOS
           
            document.write("<br>")
            document.write("<br>")
            document.write("<br>")
            var form = document.createElement("form")    
           
            var f1 = document.createElement("fieldset")
            var l1 = document.createElement("legend")
            l1.innerHTML = "Quantidade"
            f1.appendChild(l1) 

            var f2 = document.createElement("fieldset")
            var l2 = document.createElement("legend")
            l2.innerHTML = "Produto"
            f2.appendChild(l2) 

            var f3 = document.createElement("fieldset")
            var l3 = document.createElement("legend")
            l3.innerHTML = "Preço(unitário) R$"
            f3.appendChild(l3) 

           
            var qnt = document.createElement("input") 
            f1.appendChild(qnt)
            
            var produto = document.createElement("input")
            f2.appendChild(produto)

            var preco = document.createElement("input")
            f3.appendChild(preco)
            var btnAdc = document.createElement("input")
                btnAdc.setAttribute("type","button")
               
                                
                btnAdc.setAttribute("value","Adicionar")
                btnAdc.setAttribute("onclick","montaTabela()")
                btnAdc.style.padding = "5px"
                btnAdc.style.borderRadius = "5px"
                btnAdc.style.margin = "7px"
                btnAdc.style.boxShadow = "5px 3px 3px black"

            var btnSalvar = document.createElement("input")
                btnSalvar.setAttribute("type","button")
                btnSalvar.setAttribute("value","Salvar")
                btnSalvar.setAttribute("onclick","altItem(qnt.value,produto.value,preco.value)")
                btnSalvar.style.padding = "5px"
                btnSalvar.style.borderRadius = "5px"
                btnSalvar.style.margin = "7px"
                btnSalvar.style.boxShadow = "5px 3px 3px black"
            


            var p1 = document.createElement("p")
            var p2 = document.createElement("p")
            var p3 = document.createElement("p")

            p1.appendChild(f1)
            p2.appendChild(f2)
            p3.appendChild(f3)


            form.appendChild(p1)
            form.appendChild(p2)
            form.appendChild(p3)
            
            form.appendChild(btnAdc)
            form.appendChild(btnSalvar)

            form.style.color = "white"
            form.style.margin = "70px"
            form.style.cssFloat = "left"
            //form.style.boxShadow ="5px 5px 5px black"
            form.style.width = "18%"
            
           // form.style.backgroundColor ="#4d1919"
            form.style.textAlign ="center"
  
            document.body.appendChild(form) 
            
        //FIM DO FORMULÁRIO DE ENTRADA DE DADOS
        
       
            
        //CABEÇARIO
        document.body.appendChild(pInstrucao)
           
            var table = document.createElement("table")
            var thead = document.createElement("thead")
           //var trHead = document.createElement("tr")
            var thQnt = document.createElement("th")
            thQnt.innerHTML = "Quantidade"
            var thProduto = document.createElement("th")
            thProduto.innerHTML = "Produto"
            var thPreco = document.createElement("th")
            thPreco.innerHTML = "Preço unitário"
            var thExc = document.createElement("th")
            thExc.innerHTML = "Excluir"
            
            //var thAlt = document.createElement("th")
            //thAlt.innerHTML = "Alterar"
            thead.appendChild(thQnt)
            thead.appendChild(thProduto)
            thead.appendChild(thPreco)
            thead.appendChild(thExc)
            //thead.appendChild(thAlt)

            thQnt.style.paddingLeft = "50px"
            thQnt.style.paddingRight = "50px"
            thPreco.style.paddingLeft = "80px"
            thPreco.style.paddingRight = "80px"
            thProduto.style.paddingLeft = "80px"
            thProduto.style.paddingRight = "80px"
            thExc.style.paddingLeft = "50px"
            thExc.style.paddingRight = "50px"
           // thAlt.style.paddingLeft = "40px"
            //thAlt.style.paddingRight = "40px"
            thead.style.backgroundColor = "white"
            thead.style.fontSize = "18px"
            thead.style.heigth = "20px"


            table.appendChild(thead)
            table.style.textAlign = "center"
            table.style.margin ="80px"
            table.style.boxShadow = "5px 5px 5px black"
            table.style.width = "20%"
            //table.style.border = "1px solid black"
            

          
            

            
            
            document.body.appendChild(table)
        //FIM DO CABEÇARIO DA TABELA
        tbody = document.createElement("tbody")                   
        var listaToda = []

        function montaTabela(){
            listaToda.push([qnt.value,produto.value,preco.value])    
            tr = document.createElement("tr")
            tdQnt = document.createElement("td")
            tdQnt.innerHTML = qnt.value
            tdProduto = document.createElement("td")
            tdProduto.innerHTML = produto.value
            tdPreco = document.createElement("td")
            tdPreco.innerHTML = "R$" + preco.value
            //var tdAlt = document.createElement("td")
            var btnDel = document.createElement("button")
            btnDel.innerHTML = "x"
            btnDel.style.color = "red"
            btnDel.setAttribute("onclick","delItem(this.parentNode.rowIndex)")
            //var btnAlt = document.createElement("button")
            //btnAlt.setAttribute("onclick","altItem(itemBanda.value,itemData.value,itemLocal.value)")
            //btnAlt.innerHTML = "Alterar"
            //tdAlt.appendChild(btnAlt)
            tr.appendChild(tdQnt)
            tr.appendChild(tdProduto)
            tr.appendChild(tdPreco)
            tr.appendChild(btnDel)
            //tr.appendChild(tdAlt)

            tbody.appendChild(tr)
            tbody.style.backgroundColor = "#4d1919"
            tbody.style.color = "white"     
            table.appendChild(tbody)
            
            console.log(listaToda)
            qnt.value = ""
            produto.value = ""
            preco.value = ""
            qnt.focus()
            preencheCamposForm()

        }
        
            
        
                    
        function delItem(i){
            table.deleteRow(i)
        } 
        
var index

function altItem(qnt, produto, preco) {
    table.rows[index].cells[0].innerHTML = qnt;
    table.rows[index].cells[1].innerHTML = produto;
    table.rows[index].cells[2].innerHTML = preco;
    table.rows[index].style.backgroundColor = "#4d1919"
    qnt.value = ""
    produto.value = ""
    preco.value =""
}

function preencheCamposForm() {
    for(var i = 0; i < table.rows.length; i++) 
    {
        table.rows[i].ondblclick = function()     
        {
            index = this.rowIndex;           
            qnt.value = table.rows[index].cells[0].innerText;
            produto.value = table.rows[index].cells[1].innerText;
            preco.value = table.rows[index].cells[2].innerText;
            table.rows[index].style.backgroundColor = "#FA5858"
        }
    }
    }
        

         
      
      

        function buscaItem(){
            for (var i=0; i <table.childNodes.lenght; i++){
                var achou = false;
                var tr = table.childNodes[i]
                var td = tr.childNodes
                for (var j = 0; j< td.lenght; j++) {
                    var value = td[j].childNodes[0].nodeValue.toLowerCase()
                    if(value.indexOf(buscar) >=0) {
                        acho = true
                }}
                if (achou) {
                    tr.style.display = "table-row"
        
                }
                else{
                    tr.style.display= "none"

                }}}
               

         
     
    
    </script>

</body>
</html>
